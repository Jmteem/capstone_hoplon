(this["webpackJsonpdjango-react-boilerplate"]=this["webpackJsonpdjango-react-boilerplate"]||[]).push([[0],{183:function(e,t,n){},213:function(e,t,n){},216:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=n(17),s=n.n(r),a=(n(183),n(12)),o=n(255),u=n(257),l=n(63),d=n(77),j=n(36),b=n(105),O=n.n(b),f=function(){return O.a.get("token")},h=function(){O.a.remove("token")},m=function(e){O.a.set("token",e.token)},x=n(2),p=function(){h(),window.location.reload(!1)},g=function(){return Object(x.jsx)("div",{"data-testid":"MainNavbar",children:Object(x.jsx)(o.a,{color:"primary",children:Object(x.jsxs)(u.a,{style:{justifyContent:"space-evenly"},children:[Object(x.jsx)(d.a,{variant:"h2",style:{width:"75%",fontWeight:"bolder",fontStyle:"italic"},children:"ADTAA"}),Object(x.jsx)(l.a,{color:"default",variant:"contained",component:j.b,to:"/",children:"Assistant"}),Object(x.jsx)(l.a,{color:"default",variant:"contained",component:j.b,to:"/setup",children:"Setup"}),f()?Object(x.jsx)(l.a,{color:"default",variant:"contained",onClick:p,children:"Logout"}):Object(x.jsx)(l.a,{color:"default",variant:"contained",component:j.b,to:"/login",children:"Login"})]})})})};g.defaultProps={};var v=g,y=n(33),S=n(5),C=n(265),w=n(262),_=n(263),k=n(264),T=n(78),I=n(50),P=n.n(I),N=n(76),q=n(40),E=n.n(q),A="/api/",L="".concat(A,"discipline/"),D="".concat(A,"instructor/"),W="".concat(A,"timeslot/"),R="".concat(A,"section/"),F="".concat(A,"course/"),M="".concat(A,"solution/"),z="".concat(A,"solution/constraintmap/"),B="".concat(A,"auth/token/"),J="".concat(A,"registrationrequest/create/"),G="".concat(A,"auth/changepassword/"),U="".concat(A,"changes/");function Q(e){if(401===e.status&&f()&&h(),e.status>=400&&e.status<600)throw new Error(e.status)}var Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},c="POST"===e.method||"PUT"===e.method,i=f();return c||i?(c&&(n["Content-Type"]="application/json"),i&&!t&&(n.Authorization="Token ".concat(i)),e.headers=n,e):e},H={authenticate:function(){var e=Object(N.a)(E.a.mark((function e(t,n){var c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",body:JSON.stringify({username:t,password:n})},e.next=3,fetch(B,Y(c,!0));case 3:return Q(i=e.sent),e.abrupt("return",i.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),get:function(){var e=Object(N.a)(E.a.mark((function e(t){var n,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET"},e.next=3,fetch(t,Y(n));case 3:return Q(c=e.sent),e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),post:function(){var e=Object(N.a)(E.a.mark((function e(t,n){var c,i,r,s=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.length>2&&void 0!==s[2]&&s[2],i={method:"POST",body:JSON.stringify(n)},e.next=4,fetch(t,Y(i,c));case 4:return Q(r=e.sent),e.abrupt("return",r.json());case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),put:function(){var e=Object(N.a)(E.a.mark((function e(t,n){var c,i,r,s=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!(s.length>2&&void 0!==s[2])||s[2],i={method:"PUT",body:JSON.stringify(n)},c&&(t+=n.id.toString()),e.next=5,fetch(t,Y(i));case 5:return Q(r=e.sent),e.abrupt("return",t===G?r:r.json());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),delete:function(){var e=Object(N.a)(E.a.mark((function e(t,n){var c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"DELETE"},e.next=3,fetch(t+n.toString(),Y(c));case 3:return Q(i=e.sent),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},K=H,V=n(101),X=n.n(V),Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h3";return Object(x.jsx)(d.a,{variant:t,style:{color:X()().palette.primary,fontWeight:"bold",marginBottom:"0.5em"},children:e})},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current";return Object(x.jsxs)(d.a,{children:["Your account is not authorized to access the ",e," page. Only administrators can make changes to this information. If you believe you should have access to this page, please contact an administrator or supervisor to correct this."]})},ee=n(218),te=function(){var e=Object(c.useState)(!1),t=Object(S.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!1),s=Object(S.a)(r,2),a=s[0],o=s[1],u=Object(c.useState)(!1),b=Object(S.a)(u,2),O=b[0],f=b[1],h=Object(c.useState)(!1),m=Object(S.a)(h,2),p=m[0],g=m[1],v=Object(c.useState)([]),I=Object(S.a)(v,2),N=I[0],q=I[1],E=Object(c.useState)([]),A=Object(S.a)(E,2),L=A[0],W=A[1],F=Object(c.useState)([]),B=Object(S.a)(F,2),J=B[0],G=B[1],Q=Object(c.useState)({}),Y=Object(S.a)(Q,2),H=Y[0],V=Y[1],X=function(){o(!1),g(!0),q([]),K.post(M).then((function(e){e&&q(e)}),(function(e){return console.error(e)})).finally((function(){o(!0),g(!1),f(!1)}))},te=function(e){var t=0,n=0,c=0,i={};L.forEach((function(n){var c=e.assignments.filter((function(e){return e.instructor===n}));c.length>n.maxSections&&(t+=1),i[n.id]=c.map((function(e){return e.section}))})),e.assignments.forEach((function(e){if(null!=e.instructor){H.discipline_overlap_map[e.section].includes(e.instructor)||(n+=1);var t=H.section_overlap_map[e.section];i[e.instructor].some((function(e){return t.includes(e)}))&&(c+=1)}}));var r="";return t&&(r+="".concat(t," instructors assigned over limit, ")),n&&(r+="".concat(n," instructors teaching outside of their expertise, ")),c&&(r+="".concat(c," instructors with schedule conflicts, ")),r.length>0?r.slice(0,-2):"None"},ne=function(e){"403"===e.message?i(!0):console.error(e)};return Object(c.useEffect)((function(){Promise.all([K.get(M),K.get(D),K.get(R),K.get(z),K.get(U)]).then((function(e){q(e[0]),W(e[1]),G(e[2]),V(e[3]),f(e[4].data_changed),o(!0)})).catch(ne)}),[]),n?Object(x.jsxs)("div",{children:[Z("Generated Schedules"),$("scheduler")]}):Object(x.jsxs)("div",{"data-testid":"AssistantPage",children:[Z("Generated Schedules"),p&&Object(x.jsx)(d.a,{children:"Please wait for the scheduler to finish, this step can take several minutes."}),a?function(){var e=Object(x.jsx)("br",{});return 0===L.length||0===J.length?e=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{children:"Welcome to ADTAA! To get started, classes and instructors must be defined to generate schedules from. Please use the button below to go to the setup page."}),Object(x.jsx)("br",{}),Object(x.jsx)(l.a,{color:"primary",variant:"contained",component:j.b,to:"/setup",children:"Go to Setup"})]}):0===N.length&&(e=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{children:"No solutions have been generated."}),Object(x.jsx)("br",{}),Object(x.jsx)(l.a,{variant:"contained",color:"primary",onClick:X,children:"Run Scheduler"})]})),e}():Object(x.jsx)(ee.a,{}),a&&O&&N.length>0&&Object(x.jsxs)(w.a,{variant:"outlined",style:{margin:"auto auto 1rem auto",width:"60%"},children:[Object(x.jsx)(_.a,{children:Object(x.jsx)(d.a,{children:"These solutions were generated with data that has been modified, and could be invalid. Click this button to re-run the scheduler!"})}),Object(x.jsx)(k.a,{children:Object(x.jsx)(l.a,{variant:"contained",color:"primary",style:{margin:"auto"},onClick:X,children:"Run Scheduler"})})]}),a&&Object(x.jsx)(C.a,{container:!0,alignItems:"center",justifyContent:"center",children:function(){var e,t=[],n=1,c=Object(y.a)(N.slice(0,12));try{for(c.s();!(e=c.n()).done;){var i=e.value,r=i.assignment_count===i.assignments.length?"5px #008800 solid":"1px black solid";t.push(Object(x.jsxs)(w.a,{variant:"outlined",style:{width:"20%",margin:"1em",border:r},children:[Object(x.jsxs)(_.a,{children:[Object(x.jsxs)(d.a,{children:["Option ",n]}),Object(x.jsxs)(d.a,{children:["Covered Classes: ",i.assignment_count,"/",i.assignments.length]}),Object(x.jsxs)(d.a,{children:["Issues: ",te(i)]})]}),Object(x.jsx)(k.a,{children:Object(x.jsx)(T.a,{style:{marginLeft:"auto"},component:j.b,to:"/edit/".concat(i.id),children:Object(x.jsx)(P.a,{})})})]},i.id)),n+=1}}catch(s){c.e(s)}finally{c.f()}return t}()})]})};te.defaultProps={};var ne=te,ce=n(273),ie=n(222),re=n(271),se=n(272),ae=n(103),oe=n.n(ae),ue=n(73),le=n.n(ue),de=n(221),je=n(223),be=n(16),Oe=n(278),fe=n(268),he=n(269),me=n(270),xe=n(125),pe=n(45),ge=n(280),ve=function(e){var t=e.row,n=e.setRow,i=e.disciplines,r=Object(c.useState)(""),s=Object(S.a)(r,2),a=s[0],o=s[1];return Object(x.jsxs)(C.a,{container:!0,alignItems:"center",justifyContent:"center",spacing:2,children:[Object(x.jsx)(C.a,{item:!0,children:Object(x.jsx)(xe.a,{id:"lastNameInput",label:"Last Name",required:!0,inputProps:{maxLength:30},type:"text",value:t.lastName||"",onChange:function(e){return n(Object(be.a)(Object(be.a)({},t),{},{lastName:e.target.value}))}})}),Object(x.jsx)(C.a,{item:!0,children:Object(x.jsx)(xe.a,{id:"maxSectionsInput",label:"Max Sections",required:!0,inputProps:{inputMode:"numeric",pattern:"[0-9]*",maxLength:2},type:"text",value:t.maxSections||"",onChange:function(e){return n(Object(be.a)(Object(be.a)({},t),{},{maxSections:e.target.value.replace(/[^0-9]/g,"")}))}})}),Object(x.jsx)(C.a,{item:!0,children:Object(x.jsx)(xe.a,{id:"qualificationsSelect",select:!0,label:"Qualifications",style:{minWidth:150},value:a,onChange:function(e){return o(e.target.value)},children:i.filter((function(e){return t.qualifications.findIndex((function(t){return t.id===e.id}))<0})).map((function(e){return Object(x.jsx)(pe.a,{value:e,children:e.name},e.name)}))})}),Object(x.jsx)(C.a,{item:!0,children:Object(x.jsx)(l.a,{variant:"contained",color:"default",onClick:function(){return n(Object(be.a)(Object(be.a)({},t),{},{qualifications:t.qualifications.concat([a])}))},children:"Add"})}),Object(x.jsx)(C.a,{item:!0,xs:12,children:t.qualifications.map((function(e){return Object(x.jsx)(ge.a,{label:e.name,onDelete:function(){return n(Object(be.a)(Object(be.a)({},t),{},{qualifications:t.qualifications.filter((function(t){return t.id!==e.id}))}))}})}))})]})},ye=function(e){var t=e.create,n=e.open,i=e.setOpen,r=e.row,s=e.disciplines,a=e.setInstructors,o=Object(c.useState)({lastName:null,maxSections:null,qualifications:[]}),u=Object(S.a)(o,2),d=u[0],j=u[1],b=t?"Create Instructor":"Edit Instructor",O=function(){return i(!1)};return Object(c.useEffect)((function(){n&&!t?j(r):n&&t&&j({lastName:null,maxSections:null,qualifications:[]})}),[n]),Object(x.jsx)("div",{"data-testid":"InstructorDialog",children:Object(x.jsxs)(Oe.a,{open:n,onClose:O,"aria-labelledby":"instructor-dialog",fullWidth:!0,maxWidth:"sm",children:[Object(x.jsx)(fe.a,{id:"instructor-dialog",children:b}),Object(x.jsx)(he.a,{children:Object(x.jsx)(ve,{row:d,setRow:j,disciplines:s})}),Object(x.jsxs)(me.a,{children:[Object(x.jsx)(l.a,{variant:"contained",onClick:O,color:"default",children:"Cancel"}),Object(x.jsx)(l.a,{variant:"contained",disabled:!d.lastName||!d.maxSections,onClick:function(){var e=Object(be.a)(Object(be.a)({},d),{},{qualifications:d.qualifications.map((function(e){return e.id}))});t?K.post(D,e).then((function(e){a((function(t){return t.concat([Object(be.a)(Object(be.a)({},e),{},{qualifications:d.qualifications})])})),i(!1)}),(function(e){return console.log(e)})):K.put(D,e).then((function(){a((function(e){var t=e.findIndex((function(e){return e.id===d.id})),n=e.slice(0);return n[t]=d,n})),i(!1)}),(function(e){return console.log(e)}))},color:"primary",children:"Submit"})]})]})})};ye.defaultProps={};var Se=ye,Ce=function(e,t,n){var c,i=[],r=Object(y.a)(e);try{var s=function(){var r=c.value;i.push(Object(x.jsxs)(ie.a,{children:[Object(x.jsx)(re.a,{primary:r.lastName,secondary:"Assignment Limit: "+r.maxSections.toString()}),Object(x.jsxs)(se.a,{children:[Object(x.jsx)(T.a,{edge:"end","aria-label":"edit-instructor",onClick:function(){return n(r)},children:Object(x.jsx)(P.a,{})}),Object(x.jsx)(T.a,{edge:"end","aria-label":"delete-instructor",onClick:function(){K.delete(D,r.id).then((function(){t(e.filter((function(e){return e.id!==r.id})))}),(function(e){return console.error(e)}))},children:Object(x.jsx)(le.a,{})})]})]},r.id)),i.push(Object(x.jsx)(ce.a,{},"divider-".concat(r.id)))};for(r.s();!(c=r.n()).done;)s()}catch(a){r.e(a)}finally{r.f()}return i},we=function(e){var t=Object(c.useState)({}),n=Object(S.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(!1),a=Object(S.a)(s,2),o=a[0],u=a[1],l=Object(c.useState)(!1),d=Object(S.a)(l,2),j=d[0],b=d[1];return Object(x.jsxs)("div",{"data-testid":"InstructorList",children:[Object(x.jsxs)(de.a,{style:{border:"1px #0000001f solid"},children:[Ce(e.instructors,e.setInstructors,(function(e){r(e),b(!0)})),Object(x.jsxs)(ie.a,{button:!0,onClick:function(){return u(!0)},children:[Object(x.jsx)(je.a,{children:Object(x.jsx)(oe.a,{})}),Object(x.jsx)(re.a,{primary:"Add New"})]},"addRow")]}),Object(x.jsx)(Se,{create:!0,open:o,setOpen:u,disciplines:e.disciplines,setInstructors:e.setInstructors}),Object(x.jsx)(Se,{open:j,setOpen:b,row:i,disciplines:e.disciplines,setInstructors:e.setInstructors})]})};we.defaultProps={};var _e=we,ke={"Mon.":"Monday","Tue.":"Tuesday","Wed.":"Wednesday","Thu.":"Thursday","Fri.":"Friday","Sat.":"Saturday","Sun.":"Sunday"},Te=n(155),Ie=n.n(Te),Pe=n(154),Ne=n.n(Pe),qe=n(156),Ee=n.n(qe),Ae=n(224),Le=n(225),De=n(274),We=n(276),Re=function(e){var t=e.row,n=e.classes,i=e.setClasses,r=Object(c.useState)(-1),s=Object(S.a)(r,2),a=s[0],o=s[1],u=Object(c.useState)(-1),d=Object(S.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)({meetingDays:"Sun.",begin_time:"",end_time:""}),f=Object(S.a)(O,2),h=f[0],m=f[1],p=function(){return!Object.keys(ke).includes(h.meetingDays)||h.begin_time.length<5||h.end_time.length<5},g=function(e){var t={id:e.id,course:e.course.id,meetingTimes:e.meetingTimes};K.put(R,t).then((function(t){i((function(n){var c=n.findIndex((function(t){return t.id===e.id})),i=n.slice(0);return i[c]=t,i}))}),(function(e){return console.error(e)}))},v=function(e){if(e.id!==a)return[];var t,n=[],c=Object(y.a)(e.meetingTimes);try{for(c.s();!(t=c.n()).done;){var i=t.value,r="".concat(i.meetingDays," ").concat(i.begin_time,"-").concat(i.end_time);n.push(Object(x.jsx)(Ae.a,{value:i.id,label:r,control:Object(x.jsx)(We.a,{})},i.id))}}catch(s){c.e(s)}finally{c.f()}return n};return Object(x.jsxs)(C.a,{container:!0,alignItems:"center",justifyContent:"center",spacing:2,children:[Object(x.jsx)(C.a,{item:!0,xs:2,children:Object(x.jsx)(xe.a,{select:!0,label:"Day",style:{minWidth:60},value:h.meetingDays,onChange:function(e){return m(Object(be.a)(Object(be.a)({},h),{},{meetingDays:e.target.value}))},children:Object.keys(ke).map((function(e){return Object(x.jsx)(pe.a,{value:e,children:e},e)}))})}),Object(x.jsx)(C.a,{item:!0,xs:4,children:Object(x.jsx)(xe.a,{label:"Begin Time",type:"time",value:h.begin_time,onChange:function(e){return m(Object(be.a)(Object(be.a)({},h),{},{begin_time:e.target.value}))},InputLabelProps:{shrink:!0},inputProps:{step:60},fullWidth:!0})}),Object(x.jsx)(C.a,{item:!0,xs:4,children:Object(x.jsx)(xe.a,{label:"End Time",type:"time",value:h.end_time,onChange:function(e){return m(Object(be.a)(Object(be.a)({},h),{},{end_time:e.target.value}))},InputLabelProps:{shrink:!0},inputProps:{step:60},fullWidth:!0})}),n.filter((function(e){return e.course.id===t.id})).length>0&&Object(x.jsxs)(C.a,{item:!0,children:[Object(x.jsx)(l.a,{variant:"contained",color:"default",disabled:j<0||p(),onClick:function(){return e=Object(be.a)(Object(be.a)({},h),{},{id:j}),void K.put(W,e).then((function(t){i((function(n){var c,i=n.findIndex((function(e){return e.id===a})),r=n.slice(0),s=r[i].meetingTimes.findIndex((function(t){return t.id===e.id}));return r[i].meetingTimes[s]=t,r[i].meetingTimeString="".concat((c=t).meetingDays," ").concat(c.begin_time.slice(0,-3),"-").concat(c.end_time.slice(0,-3)),r}))}),(function(e){return console.error(e)}));var e},children:"Change Selected Time"}),Object(x.jsx)(l.a,{variant:"contained",color:"default",disabled:a<0||p(),onClick:function(){return function(e,t){var n=Object.assign({},t);n.meetingTimes.push(e),g(n)}(h,n.find((function(e){return e.id===a})))},children:"Add to Selected Section"})]}),Object(x.jsx)(C.a,{item:!0,children:Object(x.jsx)(l.a,{variant:"contained",color:"primary",disabled:p(),onClick:function(){return e=h,void K.post(R,{course:t.id,meetingTimes:[e]}).then((function(e){console.log(e),console.log(n),i((function(t){return t.concat([e])}))}),(function(e){return console.error(e)}));var e},children:"Add to New Section"})}),Object(x.jsx)(C.a,{item:!0,xs:12,children:function(){var e=[];return n&&(e=n.filter((function(e){return e.course.id===t.id})).map((function(e){return Object(x.jsxs)("div",{children:[Object(x.jsxs)(ie.a,{button:!0,onClick:function(){return t=e.id,o(t);var t},children:[(t=e.id,a===t?Object(x.jsx)(je.a,{children:Object(x.jsx)(Ne.a,{})}):Object(x.jsx)(je.a,{children:Object(x.jsx)(Ie.a,{})})),Object(x.jsx)(re.a,{primary:"Section ".concat(e.id),secondary:"".concat(e.meetingTimes.length," time slot(s)")}),Object(x.jsxs)(se.a,{children:[Object(x.jsx)(T.a,{onClick:function(){return function(e,t){var n=Object.assign({},t);n.meetingTimes=n.meetingTimes.filter((function(t){return t.id!==e})),g(n)}(j,e)},disabled:j<0,children:Object(x.jsx)(Ee.a,{})}),Object(x.jsx)(T.a,{onClick:function(){return t=e.id,void K.delete(R,t).then((function(e){t===a&&o(-1),i(n.filter((function(e){return e.id!==t})))}),(function(e){return console.error(e)}));var t},children:Object(x.jsx)(le.a,{})})]})]}),Object(x.jsx)(Le.a,{children:Object(x.jsx)(De.a,{value:j,onChange:function(e){return b(parseInt(e.target.value))},children:v(e)})})]},e.id);var t}))),e}()})]})},Fe=function(e){var t=e.row,n=e.setRow,i=e.classes,r=e.setClasses,s=e.disciplines,a=e.create,o=Object(c.useState)(""),u=Object(S.a)(o,2),j=u[0],b=u[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{variant:"h6",style:{textAlign:"center"},children:"Course"}),Object(x.jsxs)(C.a,{container:!0,alignItems:"center",justifyContent:"center",spacing:2,children:[Object(x.jsx)(C.a,{item:!0,children:Object(x.jsx)(xe.a,{label:"Course Title",required:!0,value:t.course_title||"",inputProps:{maxLength:55},type:"text",onChange:function(e){return n(Object(be.a)(Object(be.a)({},t),{},{course_title:e.target.value}))}})}),Object(x.jsx)(C.a,{item:!0,children:Object(x.jsx)(xe.a,{label:"Course Number",required:!0,value:t.course_number||"",inputProps:{inputMode:"numeric",pattern:"[0-9]*",maxLength:4},type:"text",onChange:function(e){return n(Object(be.a)(Object(be.a)({},t),{},{course_number:e.target.value}))}})}),Object(x.jsx)(C.a,{item:!0,children:Object(x.jsx)(xe.a,{select:!0,label:"Subject Disciplines",style:{minWidth:160},value:j,onChange:function(e){return b(e.target.value)},children:s.filter((function(e){return t.subject_disciplines.findIndex((function(t){return t.id===e.id}))<0})).map((function(e){return Object(x.jsx)(pe.a,{value:e,children:e.name},e.name)}))})}),Object(x.jsx)(C.a,{item:!0,children:Object(x.jsx)(l.a,{variant:"contained",color:"default",onClick:function(){return n(Object(be.a)(Object(be.a)({},t),{},{subject_disciplines:t.subject_disciplines.concat([j])}))},children:"Add"})}),Object(x.jsx)(C.a,{item:!0,xs:12,children:t.subject_disciplines.map((function(e){return Object(x.jsx)(ge.a,{label:e.name,onDelete:function(){return n(Object(be.a)(Object(be.a)({},t),{},{subject_disciplines:t.subject_disciplines.filter((function(t){return t.id!==e.id}))}))}},e.id)}))})]}),!a&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{variant:"h6",style:{textAlign:"center",marginTop:"1rem"},children:"Sections"}),Object(x.jsx)(Re,{row:t,classes:i,setClasses:r})]})]})},Me=function(e){var t=e.create,n=e.open,i=e.setOpen,r=e.row,s=e.setCourses,a=e.classes,o=e.setClasses,u=e.disciplines,d=e.setSelected,j=e.setEditOpen,b=Object(c.useState)({course_title:"",course_number:null,subject_disciplines:[]}),O=Object(S.a)(b,2),f=O[0],h=O[1],m=t?"Create Class":"Edit Class",p=function(){return i(!1)};return Object(c.useEffect)((function(){n&&!t?h(r):n&&t&&h({course_title:"",course_number:null,subject_disciplines:[]})}),[n]),Object(x.jsx)("div",{"data-testid":"ClassDialog",children:Object(x.jsxs)(Oe.a,{open:n,onClose:p,"aria-labelledby":"instructor-dialog",fullWidth:!0,maxWidth:"sm",children:[Object(x.jsx)(fe.a,{id:"instructor-dialog",children:m}),Object(x.jsx)(he.a,{children:Object(x.jsx)(Fe,{row:f,setRow:h,classes:a,setClasses:o,disciplines:u,create:t})}),Object(x.jsxs)(me.a,{children:[Object(x.jsx)(l.a,{variant:"contained",onClick:p,color:"default",children:"Cancel"}),Object(x.jsx)(l.a,{variant:"contained",onClick:function(){var e=Object(be.a)(Object(be.a)({},f),{},{subject_disciplines:f.subject_disciplines.map((function(e){return e.id}))});t?K.post(F,e).then((function(e){var t=Object(be.a)(Object(be.a)({},e),{},{subject_disciplines:f.subject_disciplines});s((function(e){return e.concat([t])})),d(t),i(!1),j(!0)}),(function(e){return console.error(e)})):K.put(F,e).then((function(e){s((function(e){var t=e.findIndex((function(e){return e.id===f.id})),n=e.slice(0);return n[t]=f,n})),i(!1)}),(function(e){return console.error(e)}))},color:"primary",disabled:!f.course_title||!f.course_number,children:"Submit"})]})]})})};Me.defaultProps={};var ze=Me,Be=function(e,t,n,c){var i,r=[],s=Object(y.a)(t);try{var a=function(){var t=i.value,s=e.filter((function(e){return e.course.id===t.id})),a=s.map((function(e){return e.meetingTimeString}));r.push(Object(x.jsxs)(ie.a,{children:[Object(x.jsx)(re.a,{primary:"CPSC "+t.course_number+" - "+t.course_title,secondary:s.length.toString()+" Section(s) - "+a.join(" | ")}),Object(x.jsxs)(se.a,{children:[Object(x.jsx)(T.a,{edge:"end",onClick:function(){return c(t)},children:Object(x.jsx)(P.a,{})}),Object(x.jsx)(T.a,{edge:"end",onClick:function(){K.delete(F,t.id).then((function(e){n((function(e){return e.filter((function(e){return e.id!==t.id}))}))}),(function(e){return console.error(e)}))},children:Object(x.jsx)(le.a,{})})]})]},t.id)),r.push(Object(x.jsx)(ce.a,{},"divider-".concat(t.id)))};for(s.s();!(i=s.n()).done;)a()}catch(o){s.e(o)}finally{s.f()}return r},Je=function(e){var t=Object(c.useState)({}),n=Object(S.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(!1),a=Object(S.a)(s,2),o=a[0],u=a[1],l=Object(c.useState)(!1),d=Object(S.a)(l,2),j=d[0],b=d[1];return Object(x.jsxs)("div",{"data-testid":"ClassList",children:[Object(x.jsxs)(de.a,{style:{border:"1px #0000001f solid"},children:[Be(e.classes,e.courses,e.setCourses,(function(e){r(e),b(!0)})),Object(x.jsxs)(ie.a,{button:!0,onClick:function(){return u(!0)},children:[Object(x.jsx)(je.a,{children:Object(x.jsx)(oe.a,{})}),Object(x.jsx)(re.a,{primary:"Add New"})]},"addRow")]}),Object(x.jsx)(ze,{create:!0,open:o,setOpen:u,setCourses:e.setCourses,disciplines:e.disciplines,setClasses:e.setClasses,setSelected:r,setEditOpen:b}),Object(x.jsx)(ze,{open:j,setOpen:b,row:i,setCourses:e.setCourses,disciplines:e.disciplines,classes:e.classes,setClasses:e.setClasses})]})};Je.defaultProps={};var Ge=Je,Ue=function(){var e=Object(c.useState)(!1),t=Object(S.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!1),s=Object(S.a)(r,2),a=s[0],o=s[1],u=Object(c.useState)([]),l=Object(S.a)(u,2),d=l[0],j=l[1],b=Object(c.useState)([]),O=Object(S.a)(b,2),f=O[0],h=O[1],m=Object(c.useState)([]),p=Object(S.a)(m,2),g=p[0],v=p[1],y=Object(c.useState)([]),w=Object(S.a)(y,2),_=w[0],k=w[1],T=function(e){"403"===e.message?i(!0):console.error(e)};return Object(c.useEffect)((function(){Promise.all([K.get(L),K.get(D),K.get(R),K.get(F)]).then((function(e){j(e[0]),h(e[1]),v(e[2]),k(e[3]),o(!0)}),T)}),[]),n?Object(x.jsxs)("div",{"data-testid":"SetupPage",children:[Z("Setup Page"),$("setup")]}):Object(x.jsx)("div",{"data-testid":"SetupPage",children:Object(x.jsxs)(C.a,{container:!0,spacing:2,justifyContent:"center",children:[Object(x.jsxs)(C.a,{container:!0,item:!0,xs:5,direction:"column",children:[Z("Teaching Staff","h4"),Object(x.jsx)("div",{style:{padding:"1rem 5rem"},children:a?Object(x.jsx)(_e,{instructors:f,setInstructors:h,disciplines:d}):Object(x.jsx)(ee.a,{})})]}),Object(x.jsx)(ce.a,{orientation:"vertical",flexItem:!0}),Object(x.jsxs)(C.a,{container:!0,item:!0,xs:5,direction:"column",children:[Z("Class Roster","h4"),Object(x.jsx)("div",{style:{padding:"1rem 5rem"},children:a?Object(x.jsx)(Ge,{classes:g,setClasses:v,courses:_,setCourses:k,disciplines:d}):Object(x.jsx)(ee.a,{})})]})]})})};Ue.defaultProps={};var Qe=Ue,Ye=function(e,t){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(C.a,{container:!0,alignItems:"center",justifyContent:"center",spacing:2,children:[Object(x.jsx)(C.a,{item:!0,xs:12,children:Object(x.jsx)(xe.a,{required:!0,label:"Email",type:"text",onChange:function(t){return e(t.target.value)}})}),Object(x.jsx)(C.a,{item:!0,xs:12,children:Object(x.jsx)(xe.a,{required:!0,label:"Password",type:"password",onChange:function(e){return t(e.target.value)}})})]})})},He=function(e,t,n,c){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(C.a,{container:!0,alignItems:"center",justifyContent:"center",spacing:2,children:[Object(x.jsx)(C.a,{item:!0,xs:12,children:Object(x.jsx)(xe.a,{required:!0,label:"Email",type:"text",onChange:function(e){return t(e.target.value)}})}),Object(x.jsx)(C.a,{item:!0,xs:12,children:Object(x.jsx)(xe.a,{select:!0,label:"Requested Access Level",style:{minWidth:200},onChange:function(e){return c(e.target.value)},children:e.map((function(e){return Object(x.jsx)(pe.a,{value:e,children:e},e)}))})}),Object(x.jsx)(C.a,{item:!0,xs:12,children:Object(x.jsx)(xe.a,{required:!0,label:"Requested Password",type:"password",onChange:function(e){return n(e.target.value)}})})]})})},Ke=function(e){X()();var t=Object(c.useState)(!0),n=Object(S.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(),a=Object(S.a)(s,2),o=a[0],u=a[1],d=Object(c.useState)(),j=Object(S.a)(d,2),b=j[0],O=j[1],f=Object(c.useState)(),h=Object(S.a)(f,2),p=h[0],g=h[1];return Object(x.jsxs)("div",{"data-testid":"LoginPage",children:[Z(i?"Login":"Submit Registration Request"),i?Ye(u,O):He(["root","admin","assistant"],u,O,g),Object(x.jsx)(l.a,{color:"primary",variant:"contained",style:{marginTop:"2em",marginRight:"1em"},onClick:function(){i?K.authenticate(o,b).then((function(e){m(e),window.location.reload(!1)}),(function(e){"404"===e.message?K.put(G,{username:"root",password:"root",new_password:b},!1).then((function(){K.authenticate("root",b).then((function(e){m(e),window.location.reload(!1)}),(function(e){return console.error(e)}))}),(function(e){return console.error(e)})):console.error(e)})):K.post(J,{contact_email:o,requested_password:b,access_level:p}).then((function(e){console.log(e)}),(function(e){return console.error(e)}))},children:"Submit"}),Object(x.jsx)(l.a,{color:"default",variant:"contained",style:{marginTop:"2em"},onClick:function(){return r(!i)},children:i?"Register":"Return to Login"})]})};Ke.defaultProps={};var Ve=Ke,Xe=n(150),Ze=n(56),$e=n(261),et=n(275),tt=Object(Xe.a)(Object(Ze.b)({palette:{primary:{main:"#800000"}}})),nt=(n(213),n(157)),ct=function(e){var t=e.open,n=e.setOpen,i=e.row,r=e.schedule,s=e.setSchedule,a=e.instructors,o=(e.sectionOverlapMap,e.disciplineMap,Object(c.useState)()),u=Object(S.a)(o,2),j=u[0],b=u[1],O=function(){return n(!1)};return Object(c.useEffect)((function(){null!=i&&b(i.instructor)}),[i]),Object(x.jsx)("div",{"data-testid":"EditAssignmentDialog",children:Object(x.jsxs)(Oe.a,{open:t,onClose:O,fullWidth:!0,maxWidth:"sm",children:[Object(x.jsx)(fe.a,{children:"Edit Assignment"}),Object(x.jsxs)(he.a,{children:[null!=i&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(d.a,{style:{textAlign:"center",fontWeight:"bold"},children:[i.course_number," ",i.course_title]}),Object(x.jsx)(d.a,{style:{textAlign:"center"},children:i.meetingTimeString})]}),null!=a.size&&Object(x.jsx)(xe.a,{select:!0,label:"Instructor",style:{minWidth:160},value:j,onChange:function(e){b(e.target.value)},children:Array.from(a.values()).map((function(e){return Object(x.jsx)(pe.a,{value:e.id,children:e.lastName},e.id)}))})]}),Object(x.jsxs)(me.a,{children:[Object(x.jsx)(l.a,{variant:"contained",onClick:O,children:"Cancel"}),Object(x.jsx)(l.a,{variant:"contained",color:"primary",onClick:function(){var e=r.assignments,t=e.findIndex((function(e){return e.id===i.id}));e[t].instructor=j;var n=r;r.assignments=e,s(n),O()},disabled:!j,children:"Submit"})]})]})})};ct.defaultProps={};var it=ct,rt=function(){var e=Object(c.useState)(),t=Object(S.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(),s=Object(S.a)(r,2),o=s[0],u=s[1],d=Object(c.useState)({}),b=Object(S.a)(d,2),O=b[0],f=b[1],h=Object(c.useState)({}),m=Object(S.a)(h,2),p=m[0],g=m[1],v=Object(c.useState)({}),C=Object(S.a)(v,2),w=C[0],_=C[1],k=Object(c.useState)({}),I=Object(S.a)(k,2),N=I[0],q=I[1],E=Object(c.useState)(!1),A=Object(S.a)(E,2),L=A[0],W=A[1],F=Object(c.useState)(),B=Object(S.a)(F,2),J=B[0],G=B[1],U=Object(a.h)().solution_id,Q=[{field:"id",headerName:"ID",hide:!0},{field:"course_title",headerName:"Course",flex:1},{field:"course_number",hide:!0},{field:"meetingTimeString",headerName:"Meeting Times",flex:3},{field:"subject_disciplines",headerName:"Subject Disciplines",hide:!0},{field:"instructor_lastName",headerName:"Assigned Instructor",flex:1},{field:"Edit",renderCell:function(e){return Object(x.jsx)(T.a,{onClick:function(){G(e.row),W(!0)},children:Object(x.jsx)(P.a,{})})},flex:.5}],Y=function(){return null!=n&&null!=O.size&&null!=p.size&&0!==Object.keys(w).length&&0!==Object.keys(N).length};return Object(c.useEffect)((function(){K.get(M+U.toString()).then((function(e){i(e),u(e)}),(function(e){console.error(e)})),K.get(D).then((function(e){f(new Map(e.map((function(e){return[e.id,e]}))))}),(function(e){console.error(e)})),K.get(R).then((function(e){g(new Map(e.map((function(e){return[e.id,e]}))))}),(function(e){console.error(e)})),K.get(z).then((function(e){_(e.section_overlap_map),q(e.discipline_overlap_map)}),(function(e){return console.error(e)}))}),[U]),Object(x.jsxs)("div",{"data-testid":"EditSolution",children:[Object(x.jsxs)("div",{style:{marginBottom:"0.5rem",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",width:"80vw",marginLeft:"auto",marginRight:"auto"},children:[Object(x.jsx)(l.a,{variant:"contained",style:{height:"36px"},component:j.b,to:"/",children:"Cancel"}),Z("Edit Solution"),Object(x.jsx)(l.a,{variant:"contained",style:{height:"36px"},color:"primary",children:"Submit"})]}),Object(x.jsx)("div",{style:{height:"80vh",width:"80vw",margin:"auto"},children:Y()?Object(x.jsx)(nt.a,{rows:function(e){var t=[];if(0!==p.size&&null!=p.size){var n,c=Object(y.a)(e);try{for(c.s();!(n=c.n()).done;){var i=n.value,r=p.get(i.section),s="Unassigned";null!=i.instructor&&(s=O.get(i.instructor).lastName),r&&t.push({id:i.id,course_title:r.course.course_title,course_number:r.course.course_number,meetingTimeString:r.meetingTimeString,instructor:i.instructor,instructor_lastName:s,subject_disciplines:r.course.subject_disciplines})}}catch(a){c.e(a)}finally{c.f()}}return t}(o.assignments),columns:Q,autoPageSize:!0}):Object(x.jsx)("p",{children:"Loading"})}),Y()&&Object(x.jsx)(it,{open:L,setOpen:W,row:J,schedule:o,setSchedule:u,instructors:O,sectionOverlapMap:w,disciplineMap:N})]})};rt.defaultProps={};var st=rt;var at,ot=(at=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(v,{}),Object(x.jsx)("div",{className:"content",children:Object(x.jsxs)(a.d,{children:[Object(x.jsx)(a.b,{path:"/",element:f()?Object(x.jsx)(ne,{}):Object(x.jsx)(a.a,{to:"/login"})}),Object(x.jsx)(a.b,{path:"/edit/:solution_id",element:f()?Object(x.jsx)(st,{}):Object(x.jsx)(a.a,{to:"/login"})}),Object(x.jsx)(a.b,{path:"/setup",element:f()?Object(x.jsx)(Qe,{}):Object(x.jsx)(a.a,{to:"/login"})}),Object(x.jsx)(a.b,{path:"/login",element:f()?Object(x.jsx)(a.a,{to:"/"}):Object(x.jsx)(Ve,{})})]})})]})},function(e){return Object(x.jsxs)($e.a,{theme:tt,children:[Object(x.jsx)(et.a,{}),Object(x.jsx)(at,Object(be.a)({},e))]})}),ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,281)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),r(e),s(e)}))};s.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(j.a,{children:Object(x.jsx)(ot,{})})}),document.getElementById("root")),ut()}},[[216,1,2]]]);
//# sourceMappingURL=main.7125757b.chunk.js.map